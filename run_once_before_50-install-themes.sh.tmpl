{{- if (and (eq .chezmoi.os "linux") (eq .chezmoi.osRelease.name "Pop!_OS")) -}}
#!/bin/bash

set -e

{{ if .prefs.dracula_pro }}
DRACULA_PRO_FOLDER="{{ .chezmoi.homeDir -}}/.config/dracula-pro"
DRACULA_PRO_URL="https://github.com/krmbzds/dracula-pro"
if [ ! -d "$DRACULA_PRO_FOLDER" ] ; then
    git clone $DRACULA_PRO_URL $DRACULA_PRO_FOLDER
else
    git -C $DRACULA_PRO_FOLDER pull
fi
{{ end }}

{{ if .gnome.dracula }}
DRACULA_FOLDER="{{ .chezmoi.homeDir -}}/.config/dracula"
DRACULA_URL="https://github.com/dracula/dracula-theme"
if [ ! -d "$DRACULA_FOLDER" ] ; then
    git clone $DRACULA_URL $DRACULA_FOLDER
else
    git -C $DRACULA_FOLDER pull
fi
git -C $DRACULA_FOLDER submodule update --init themes/gtk
{{ end }}

{{ if lookPath "batcat" }}
batcat cache --build
{{ else if lookPath "bat" }}
bat cache --build
{{ end }}

# MesloLGS NF
meslo=(Regular Bold Italic "Bold%20Italic")
for i in "${meslo[@]}"; do
    wget -P ~/.fonts/ -nv -nc  "https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS%20NF%20$i.ttf"
done

# Source Code Pro
sourcecodepro=(Black BlackIt Bold BoldIt ExtraLight ExtraLightIt It Light LightIt Medium MediumIt Regular Semibold SemiboldIt)
for i in "${sourcecodepro[@]}"; do
    wget -P ~/.fonts/ -nv -nc --content-disposition --max-redirect=3 "https://github.com/adobe-fonts/source-code-pro/blob/release/TTF/SourceCodePro-$i.ttf?raw=true"
done

{{ end }}
